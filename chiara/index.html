<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galleria Compleanno üéÇ</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Hero Section -->
    <div class="hero">
        <div class="container">
            <h1>üéâ Buon Compleanno! üéâ</h1>
            <p>Una collezione speciale di ricordi condivisi dai tuoi amici</p>
            <a href="upload.html" class="btn">Carica le tue foto</a>
        </div>
    </div>

    <!-- Users Section -->
    <div class="container">
        <div class="users-section">
            <h2>Le nostre foto insieme</h2>
            <div id="mainLoading" style="display: flex;">
                <div class="loading-spinner"></div>
                <p>Caricamento gallerie...</p>
            </div>
            <div id="usersGrid" class="users-grid" style="display: none;">
                <!-- Le card degli utenti verranno generate qui dinamicamente -->
            </div>
            <div style="text-align: center;">
                <button onclick="startFullSlideshow()" class="btn btn-primary">üé¨ Avvia Slideshow Completo</button>
            </div>
        </div>
    </div>

    <!-- Gallery Modal -->
    <div id="galleryModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeGallery()">√ó</button>
            <h2 id="galleryTitle"></h2>
            <p id="galleryMessage" style="display: none;"></p>
            <div id="galleryPhotos"></div>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div id="lightboxModal" class="lightbox-modal">
        <button class="lightbox-close" onclick="lightboxManager.close()">√ó</button>
        <button class="lightbox-nav lightbox-prev" onclick="lightboxManager.prev()">‚Äπ</button>
        <button class="lightbox-nav lightbox-next" onclick="lightboxManager.next()">‚Ä∫</button>
        <div class="lightbox-content">
            <img id="lightboxImage" src="" alt="">
            <video id="lightboxVideo" src="" controls style="display: none;"></video>
        </div>
        <div class="lightbox-controls">
            <button class="lightbox-btn" onclick="lightboxManager.zoomOut()" title="Zoom Out">‚àí</button>
            <span class="lightbox-zoom-text">100%</span>
            <button class="lightbox-btn" onclick="lightboxManager.zoomIn()" title="Zoom In">+</button>
            <button class="lightbox-btn" onclick="lightboxManager.resetZoom()" title="Reset">‚åÇ</button>
        </div>
        <div class="lightbox-counter"></div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Slideshow Modal -->
    <div id="slideshowModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeSlideshow()">√ó</button>
            <div id="slideshowLoading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Caricamento foto e video...</p>
                <div class="loading-progress">
                    <div id="loadingProgressBar"></div>
                    <span id="loadingProgressText">0%</span>
                </div>
            </div>
            <div class="slideshow-container">
                <!-- Photos/videos/intro slides go here dynamically -->
            </div>

            <!-- Floating control panel -->
            <div class="slideshow-floating-panel">
                <progress id="slideshowProgress" value="0" max="100"></progress>

                <div class="slideshow-info">
                    <h3 id="slideshowUserName"></h3>
                    <div id="slideCounter"></div>
                    <p id="slideshowMessage"></p>
                </div>

                <div class="slideshow-controls">
                    <button id="prevBtn">‚èÆÔ∏è Precedente</button>
                    <button id="playPauseBtn">‚è∏Ô∏è Pausa</button>
                    <button id="nextBtn">‚è≠Ô∏è Successiva</button>
                    <div class="speed-control">
                        <label for="speedSlider">Velocit√†: <span id="speedValue">5s</span></label>
                        <input type="range" id="speedSlider" min="1" max="10" value="5" step="1">
                    </div>
                    <div class="size-control">
                        <label for="sizeSlider">Dimensione: <span id="sizeValue">100%</span></label>
                        <input type="range" id="sizeSlider" min="50" max="150" value="100" step="5">
                    </div>
                </div>

                <div class="person-controls">
                    <button id="prevPersonBtn">‚è™ Persona Precedente</button>
                    <button id="nextPersonBtn">Persona Successiva ‚è©</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop>
        <source src="assets/music/background.mp3" type="audio/mpeg">
    </audio>

    <!-- Canvas Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <!-- App Scripts -->
    <script src="assets/js/firebase-config.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>

